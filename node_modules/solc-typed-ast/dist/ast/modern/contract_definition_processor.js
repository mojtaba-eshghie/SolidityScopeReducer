"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ModernContractDefinitionProcessor = void 0;
const meta_1 = require("../implementation/meta");
const node_processor_1 = require("./node_processor");
class ModernContractDefinitionProcessor extends node_processor_1.ModernNodeProcessor {
    process(reader, config, raw) {
        const [id, src] = super.process(reader, config, raw);
        const name = raw.name;
        const scope = raw.scope;
        const kind = raw.contractKind;
        const abstract = "abstract" in raw ? raw.abstract : false;
        const fullyImplemented = raw.fullyImplemented;
        const linearizedBaseContracts = raw.linearizedBaseContracts;
        const usedErrors = "usedErrors" in raw ? raw.usedErrors : [];
        const usedEvents = "usedEvents" in raw ? raw.usedEvents : [];
        const nameLocation = raw.nameLocation;
        let documentation;
        if (raw.documentation) {
            documentation =
                typeof raw.documentation === "string"
                    ? raw.documentation
                    : reader.convert(raw.documentation, config);
        }
        const baseContracts = reader.convertArray(raw.baseContracts, config);
        const nodes = reader.convertArray(raw.nodes, config);
        const children = documentation instanceof meta_1.StructuredDocumentation
            ? [documentation, ...baseContracts, ...nodes]
            : [...baseContracts, ...nodes];
        return [
            id,
            src,
            name,
            scope,
            kind,
            abstract,
            fullyImplemented,
            linearizedBaseContracts,
            usedErrors,
            usedEvents,
            documentation,
            children,
            nameLocation,
            raw
        ];
    }
}
exports.ModernContractDefinitionProcessor = ModernContractDefinitionProcessor;
//# sourceMappingURL=contract_definition_processor.js.map
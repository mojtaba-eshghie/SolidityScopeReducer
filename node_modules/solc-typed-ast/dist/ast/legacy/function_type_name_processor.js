"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.LegacyFunctionTypeNameProcessor = void 0;
const constants_1 = require("../constants");
const type_name_processor_1 = require("./type_name_processor");
class LegacyFunctionTypeNameProcessor extends type_name_processor_1.LegacyTypeNameProcessor {
    process(reader, config, raw) {
        const [id, src, typeString] = super.process(reader, config, raw);
        const attributes = raw.attributes;
        const visibility = attributes.visibility;
        const stateMutability = this.detectStateMutability(attributes);
        const [parameterTypes, returnParameterTypes] = reader.convertArray(raw.children, config);
        return [
            id,
            src,
            typeString,
            visibility,
            stateMutability,
            parameterTypes,
            returnParameterTypes,
            raw
        ];
    }
    detectStateMutability(attributes) {
        if (attributes.stateMutability) {
            return attributes.stateMutability;
        }
        if (attributes.constant) {
            return constants_1.FunctionStateMutability.Constant;
        }
        return attributes.payable
            ? constants_1.FunctionStateMutability.Payable
            : constants_1.FunctionStateMutability.NonPayable;
    }
}
exports.LegacyFunctionTypeNameProcessor = LegacyFunctionTypeNameProcessor;
//# sourceMappingURL=function_type_name_processor.js.map
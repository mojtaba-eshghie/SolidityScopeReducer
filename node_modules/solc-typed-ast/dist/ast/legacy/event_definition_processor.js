"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.LegacyEventDefinitionProcessor = void 0;
const structured_documentation_1 = require("../implementation/meta/structured_documentation");
const node_processor_1 = require("./node_processor");
class LegacyEventDefinitionProcessor extends node_processor_1.LegacyNodeProcessor {
    process(reader, config, raw) {
        const [id, src] = super.process(reader, config, raw);
        const attributes = raw.attributes;
        const children = reader.convertArray(raw.children, config);
        const anonymous = attributes.anonymous;
        const name = attributes.name;
        const [structuredDocumentation, parameters] = this.extract(children);
        let documentation;
        if (structuredDocumentation) {
            documentation = structuredDocumentation;
        }
        else if (typeof attributes.documentation === "string") {
            documentation = attributes.documentation;
        }
        return [id, src, anonymous, name, parameters, documentation, undefined, raw];
    }
    extract(children) {
        let node = children.shift();
        let documentation;
        if (node instanceof structured_documentation_1.StructuredDocumentation) {
            documentation = node;
            node = children.shift();
        }
        const parameters = node;
        return [documentation, parameters];
    }
}
exports.LegacyEventDefinitionProcessor = LegacyEventDefinitionProcessor;
//# sourceMappingURL=event_definition_processor.js.map